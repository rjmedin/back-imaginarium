# Imaginarium API

API REST construida con Node.js, Express, TypeScript y MongoDB siguiendo arquitectura limpia.

## üèóÔ∏è Arquitectura

Este proyecto implementa **Clean Architecture** (Arquitectura Limpia) con las siguientes capas:

```
src/
‚îú‚îÄ‚îÄ domain/                 # Capa de Dominio
‚îÇ   ‚îú‚îÄ‚îÄ entities/          # Entidades de negocio
‚îÇ   ‚îú‚îÄ‚îÄ repositories/      # Interfaces de repositorios
‚îÇ   ‚îî‚îÄ‚îÄ value-objects/     # Objetos de valor
‚îú‚îÄ‚îÄ application/           # Capa de Aplicaci√≥n
‚îÇ   ‚îú‚îÄ‚îÄ use-cases/        # Casos de uso
‚îÇ   ‚îî‚îÄ‚îÄ dtos/             # Data Transfer Objects
‚îú‚îÄ‚îÄ infrastructure/       # Capa de Infraestructura
‚îÇ   ‚îú‚îÄ‚îÄ database/         # Configuraci√≥n de base de datos
‚îÇ   ‚îú‚îÄ‚îÄ repositories/     # Implementaciones de repositorios
‚îÇ   ‚îî‚îÄ‚îÄ container/        # Inyecci√≥n de dependencias
‚îú‚îÄ‚îÄ presentation/         # Capa de Presentaci√≥n
‚îÇ   ‚îú‚îÄ‚îÄ controllers/      # Controladores HTTP
‚îÇ   ‚îú‚îÄ‚îÄ routes/           # Definici√≥n de rutas
‚îÇ   ‚îú‚îÄ‚îÄ middleware/       # Middlewares
‚îÇ   ‚îî‚îÄ‚îÄ validation/       # Esquemas de validaci√≥n
‚îî‚îÄ‚îÄ shared/               # C√≥digo compartido
    ‚îú‚îÄ‚îÄ errors/           # Manejo de errores
    ‚îú‚îÄ‚îÄ utils/            # Utilidades
    ‚îî‚îÄ‚îÄ config/           # Configuraci√≥n
```

## üöÄ Caracter√≠sticas

- ‚úÖ Arquitectura limpia y escalable
- ‚úÖ TypeScript con tipado estricto
- ‚úÖ Autenticaci√≥n JWT
- ‚úÖ Validaci√≥n de datos con Joi
- ‚úÖ Rate limiting
- ‚úÖ Logging con Winston
- ‚úÖ Middleware de seguridad (Helmet, CORS)
- ‚úÖ Manejo centralizado de errores
- ‚úÖ Conexi√≥n MongoDB con Mongoose
- ‚úÖ Inyecci√≥n de dependencias

## üìã Requisitos

- Node.js >= 16.x
- npm >= 8.x
- MongoDB >= 5.x (o usar Docker)

## üõ†Ô∏è Instalaci√≥n

### 1. Clonar el repositorio

```bash
git clone <url-del-repositorio>
cd imaginarium-hack-3d
```

### 2. Instalar dependencias

```bash
npm install
```

### 3. Configurar variables de entorno

Copia el archivo de ejemplo y edita las variables:

```bash
cp .env.example .env
```

Edita `.env` con tus valores:

```env
# Configuraci√≥n del servidor
PORT=3000
NODE_ENV=development

# Base de datos MongoDB
MONGODB_URI=mongodb://localhost:27017/imaginarium_db

# JWT
JWT_SECRET=tu_jwt_secret_super_seguro_aqui
JWT_EXPIRES_IN=24h

# Rate Limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100
```

### 4. Configurar base de datos

#### Opci√≥n A: Usar Docker (Recomendado)

```bash
# Iniciar MongoDB con Docker Compose
docker-compose up -d mongodb

# Ver logs
docker-compose logs -f mongodb
```

#### Opci√≥n B: MongoDB local

Aseg√∫rate de tener MongoDB instalado y ejecut√°ndose en `mongodb://localhost:27017`

### 5. Instalar dependencias de TypeScript

```bash
npm install -g ts-node typescript
```

## üèÉ‚Äç‚ôÇÔ∏è Ejecuci√≥n

### Desarrollo

```bash
# Iniciar en modo desarrollo con hot reload
npm run dev
```

### Producci√≥n

```bash
# Compilar TypeScript
npm run build

# Iniciar servidor en producci√≥n
npm start
```

## üìö API Endpoints

### Autenticaci√≥n

| M√©todo | Endpoint | Descripci√≥n | Autenticaci√≥n |
|--------|----------|-------------|---------------|
| POST | `/api/v1/users/register` | Registrar usuario | No |
| POST | `/api/v1/users/login` | Iniciar sesi√≥n | No |
| GET | `/api/v1/users/profile` | Obtener perfil | S√≠ |

### Usuarios (Solo Admin)

| M√©todo | Endpoint | Descripci√≥n | Autenticaci√≥n |
|--------|----------|-------------|---------------|
| GET | `/api/v1/users` | Listar usuarios | S√≠ (Admin) |

### Utilidades

| M√©todo | Endpoint | Descripci√≥n | Autenticaci√≥n |
|--------|----------|-------------|---------------|
| GET | `/health` | Health check | No |

## üîß Ejemplos de uso

### Registrar usuario

```bash
curl -X POST http://localhost:3000/api/v1/users/register \
  -H "Content-Type: application/json" \
  -d '{
    "name": "Juan P√©rez",
    "email": "juan@ejemplo.com",
    "password": "123456"
  }'
```

### Iniciar sesi√≥n

```bash
curl -X POST http://localhost:3000/api/v1/users/login \
  -H "Content-Type: application/json" \
  -d '{
    "email": "juan@ejemplo.com",
    "password": "123456"
  }'
```

### Obtener perfil (requiere token)

```bash
curl -X GET http://localhost:3000/api/v1/users/profile \
  -H "Authorization: Bearer TU_JWT_TOKEN"
```

### Listar usuarios (requiere admin)

```bash
curl -X GET "http://localhost:3000/api/v1/users?page=1&limit=10" \
  -H "Authorization: Bearer TU_JWT_TOKEN_ADMIN"
```

## üß™ Scripts disponibles

```bash
npm run dev          # Iniciar en desarrollo
npm run build        # Compilar TypeScript
npm start            # Iniciar en producci√≥n
npm run lint         # Linter de c√≥digo
npm run lint:fix     # Corregir errores de linting autom√°ticamente
npm test             # Ejecutar tests (cuando se implementen)
```

## üê≥ Docker

### Servicios disponibles

- **MongoDB**: Puerto 27017
- **Mongo Express**: Puerto 8081 (Interfaz web para MongoDB)

```bash
# Iniciar todos los servicios
docker-compose up -d

# Ver logs
docker-compose logs -f

# Detener servicios
docker-compose down

# Eliminar vol√∫menes (¬°CUIDADO! Elimina los datos)
docker-compose down -v
```

## üîí Seguridad

- Autenticaci√≥n JWT
- Hashing de contrase√±as con bcrypt
- Rate limiting por IP
- Validaci√≥n de entrada con Joi
- Headers de seguridad con Helmet
- CORS configurado

## üìù Estructura de respuestas

### Respuesta exitosa

```json
{
  "success": true,
  "message": "Operaci√≥n exitosa",
  "data": {
    // datos de respuesta
  }
}
```

### Respuesta de error

```json
{
  "success": false,
  "message": "Descripci√≥n del error"
}
```

## ü§ù Contribuci√≥n

1. Fork el proyecto
2. Crea una rama para tu feature (`git checkout -b feature/nueva-funcionalidad`)
3. Commit tus cambios (`git commit -am 'Agregar nueva funcionalidad'`)
4. Push a la rama (`git push origin feature/nueva-funcionalidad`)
5. Abre un Pull Request

## üìÑ Licencia

Este proyecto est√° bajo la Licencia MIT - ver el archivo [LICENSE](LICENSE) para detalles.

## üîß Pr√≥ximas funcionalidades

- [ ] Tests unitarios y de integraci√≥n
- [ ] Documentaci√≥n Swagger/OpenAPI
- [ ] Logs estructurados
- [ ] M√©tricas y monitoreo
- [ ] Cache con Redis
- [ ] Subida de archivos
- [ ] Notificaciones por email
- [ ] Roles y permisos avanzados

## üìû Soporte

Si tienes problemas o preguntas, por favor abre un issue en el repositorio.
